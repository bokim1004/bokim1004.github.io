{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/sentry로-프론트-에러-잡아내기/","result":{"data":{"site":{"siteMetadata":{"title":"Chloebo.io","author":"chloe bo kim","siteUrl":"https://bokim1004.github.io","comment":{"disqusShortName":"https-bokim1004-github-io","utterances":"bokim1004/blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"49d5e178-d002-504f-ae29-51cffb531c6b","excerpt":"프론트에서도 오류를 모니터링하는 방법이 뭐가 있을까요?\n프론트에서 발생하는 오류들을 모니터링하기 위해 저희 개발팀에서는 를 도입해보자는 의견이 나왔습니다. Sentry? Sentry는 오류를 모니터링할 수 있게 해주는 모니터링 툴입니다.\n백엔드, 프론트엔드에서 발생하는 에러트래킹, 퍼포먼스 성능에 대한 모니터링까지 가능하게 해줍니다. 현재 Sentry에는 다양한 언어, 프레임워크에 대한 지원을 하고 있습니다.\n저는 React기준으로 sentry를 설정해주기 위해 react…","html":"<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/799f969c-5144-4301-a2db-fa842d3b445f/image.png\" width=\"500px\" alt=\"image\">\n</p>\n<p>프론트에서도 오류를 모니터링하는 방법이 뭐가 있을까요?<br/>\n프론트에서 발생하는 오류들을 모니터링하기 위해 저희 개발팀에서는 <code class=\"language-text\">sentry</code>를 도입해보자는 의견이 나왔습니다.</p>\n<h3 id=\"sentry\" style=\"position:relative;\"><a href=\"#sentry\" aria-label=\"sentry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sentry?</h3>\n<p><a href=\"https://sentry.io/welcome/?utm_source=google&utm_medium=cpc&utm_campaign=9657410528&utm_content=g&utm_term=sentry&device=c&gclid=Cj0KCQjwocShBhCOARIsAFVYq0hxiVSj9Jvc8_HkRAYqnILqrAgBZvPG4x8eN7W7TQn30DJGiX3hZV8aAiaBEALw_wcB&gclid=Cj0KCQjwocShBhCOARIsAFVYq0hxiVSj9Jvc8_HkRAYqnILqrAgBZvPG4x8eN7W7TQn30DJGiX3hZV8aAiaBEALw_wcB\" target=\"_blank\">Sentry</a>는 오류를 모니터링할 수 있게 해주는 모니터링 툴입니다.<br/>\n백엔드, 프론트엔드에서 발생하는 에러트래킹, 퍼포먼스 성능에 대한 모니터링까지 가능하게 해줍니다.</p>\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/afb749bd-0795-4b0a-a711-33e344f378a0/image.png\" width=\"500px\" alt=\"image\">\n</p>\nSentry를 적용하기 위해서는 우선 회원 가입을 해야합니다.\n참고로 Sentry는 유료입니다!<br> 저는 우선 테스트를 해보기 위해 무료버전인 Developer 버전으로 시작해보았습니다.\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/b612d041-e1f9-42d8-a9b9-f8f907f248b2/image.png\n\" width=\"500px\" alt=\"image\">\n</p>\n<p>현재 Sentry에는 다양한 언어, 프레임워크에 대한 지원을 하고 있습니다.\n저는 React기준으로 sentry를 설정해주기 위해 react관련 문서 (<a href=\"https://docs.sentry.io/platforms/javascript/guides/react\" target=\"_blank\">참고</a>)를 보았습니다.</p>\n<h3 id=\"install\" style=\"position:relative;\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>install</h3>\n<p>Sentry를 사용하기 위해 패키지를 설치합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Using npm\nnpm install --save @sentry/react\n\n# Using yarn\nyarn add @sentry/react</code></pre></div>\n<h3 id=\"configure\" style=\"position:relative;\"><a href=\"#configure\" aria-label=\"configure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configure</h3>\n<p>Application 최상단 부분인 <code class=\"language-text\">index.tsx</code>에 넣어주었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createRoot <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/client\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">dsn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://examplePublicKey@o0.ingest.sentry.io/0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">integrations</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Sentry<span class=\"token punctuation\">.</span>BrowserTracing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">tracesSampleRate</span><span class=\"token operator\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>“app”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>dsn은 식별키로 가입하고 들어간 sentry페이지에서 Setting → Client Keys(DSN)로 들어가면 확인하실 수 있습니다.</p>\n<h3 id=\"react-error-boundary\" style=\"position:relative;\"><a href=\"#react-error-boundary\" aria-label=\"react error boundary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Error Boundary</h3>\n<p>React 컴포넌트 트리 안에서 자동적으로 에러를 잡아 sentry로 보낼 수 있게 해주는\nerror Boundary 컴포넌트를 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/react'</span>\n<span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span>Sentry<span class=\"token punctuation\">.</span>ErrorBoundary fallback<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>An error has occurred<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Example <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Sentry<span class=\"token punctuation\">.</span>ErrorBoundary<span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"capturing-errors\" style=\"position:relative;\"><a href=\"#capturing-errors\" aria-label=\"capturing errors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Capturing Errors</h3>\n<p>sentry는 <code class=\"language-text\">Sentry.captureException</code> 또는 <code class=\"language-text\">Sentry.captureMessage</code>를 사용해 에러를 캡쳐하고 전송할 수 있게 해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/react'</span>\n<span class=\"token comment\">// capturing</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">aFunctionThatMightFail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Sentry<span class=\"token punctuation\">.</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>captureException, captureMessage는 side effects이기에,\n매 렌더마다 발생하는 것을 피하기 위해 useEffect안에서 사용해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>info<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/info'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Sentry<span class=\"token punctuation\">.</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sentry에 텍스트 메시지를 전송해야할 경우 captureMessage를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Sentry<span class=\"token punctuation\">.</span><span class=\"token function\">captureMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Something went wrong'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>로컬에서 에러를 테스트 해보니 Sentry페이지 Issues에 어떤 에러가 났는지 쌓이고 있음을 확인할 수 있었습니다.</p>\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/2e8a3a25-771d-4a6a-b3b1-46c11e307bde/image.png\n\" width=\"500px\" alt=\"image\">\n</p>\n<h3 id=\"slack과-연동하기\" style=\"position:relative;\"><a href=\"#slack%EA%B3%BC-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0\" aria-label=\"slack과 연동하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Slack과 연동하기</h3>\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/9a1ba3b6-917f-4256-ba1f-49e748926f47/image.png\n\" width=\"500px\" alt=\"image\">\n</p>\n<p>sentry페이지에서 Settings > Integrations와 들어가면 슬랙과 연동할 수 있습니다.</p>\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/ed768496-ed5f-4f3d-afdd-70ce2e061c13/image.png\n\" width=\"500px\" alt=\"image\">\n</p>\n<p>Alert에 등록할 프로젝트를 선택하고 상황별로 WHEN, IF값을 넣어주고 THEN에서 <code class=\"language-text\">send a slack notification</code> 선택 후 슬랙메시지를 전송할 채널명을 입력할 수 있습니다.</p>\n<p>제대로 연동이 됐으면 아래와 같이 에러 발생시 슬랙 알람이 오게 됩니다.</p>\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/chloeee/post/f415286e-adc2-4df8-a056-e8d8302ff856/image.png\n\" width=\"500px\" alt=\"image\">\n</p>\n<h3 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h3>\n<p>아직 테스트로 Sentry를 사용해보았는데, 실제로 제대로 적용하면 프론트에서 발생하는 에러 모니터링에 매우 좋을 것 같다는 생각을 했습니다.\n이전에 발생한 에러들도 쉽게 모니터링할 수 있고, 그래프로 시각화되어 있어 어떤 에러가 몇번 발생하는지도 알 수 있어서 매우 유용할 것 같습니다.</p>\n<p>참고: <a href=\"https://tech.kakaopay.com/post/frontend-sentry-monitoring/\">https://tech.kakaopay.com/post/frontend-sentry-monitoring/</a> <br/>\n<a href=\"https://node-js.tistory.com/33\">https://node-js.tistory.com/33</a>\n<a href=\"https://velog.io/@singsoong/Sentry-%EC%84%A4%EC%A0%95-%EC%8A%AC%EB%9E%99-%EC%97%B0%EB%8F%99-Nodejs\">https://velog.io/@singsoong/Sentry-%EC%84%A4%EC%A0%95-%EC%8A%AC%EB%9E%99-%EC%97%B0%EB%8F%99-Nodejs</a></p>","frontmatter":{"title":"SENTRY로 프론트 에러 잡아내기","date":"April 09, 2023","image":"https://velog.velcdn.com/images/chloeee/post/799f969c-5144-4301-a2db-fa842d3b445f/image.png"}}},"pageContext":{"slug":"/react/sentry로-프론트-에러-잡아내기/","previous":{"fields":{"slug":"/javascript/js-object-add/"},"frontmatter":{"title":"👉 자바스크립트 객체에 프로퍼티를 추가하는 방법"}},"next":null}},"staticQueryHashes":["2486386679","3128451518"]}